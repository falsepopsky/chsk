import { Canvas, Meta, Source, Story } from '@storybook/addon-docs'
import { Chart, BackgroundSurface } from '../src'
import { customTheme, ChartWithAxisGrid } from './themes.helpers'
import { DivDecorator } from './DivChartDecorators'

<Meta title="Core/Themes" />
export const Template = args => <ChartWithAxisGrid {...args} />

# Themes

Themes set global styles for a chart.
By setting styles once and not for individual components, themes can make chart definitions less verbose.
Themes also help in preparing multiple charts with a consistent appearance.

<div className="sidenote">
    **Side note**: This page describes how to use the theme syntax with a minimal example. For
    additional information, including about ready-made themes, see the [themes
    addon](/?path=/docs/addons-themes-complete-themes--page).
</div>

A theme object is a nested dictionary. For example, the object below changes styles
for text, surface, line, and tick components.

<Source
    language="javascript"
    code={`
const customTheme = {
  typography: {
    // title in regular font weight
    title: {
      fontWeight: 400,
    }
  },
  surface: {
    // background in a light color
    inner: {
      fill: '#f6f6f6'
    }
  },
  line: {
    // visible axis line
    axis: {
        stroke: '#222222',
        visibility: 'hidden' as const,
        strokeWidth: '2px',
    },
    // grid lines in light gray
    grid: {
      stroke: '#cccccc',
      strokeWidth: '1px',
    },
    // tick line in a heavier color
    tick: {
      stroke: '#222222',
      strokeWidth: '2px'
    }
  },
  // ticks facing into the chart
  AxisTicks: {
    left: {
        size: -6,
        padding: 6,
    },
    bottom: {
        size: -6,
        padding: 6,
    },
  }
}`}
/>

To apply the custom theme to a chart, pass it to the prop `theme` as in the pseudo-code below.

<Source
    language="javascript"
    code={`
<Chart {...props} theme={customTheme}>
  ...
</Chart>`}
/>

The examples below display the same content with the default and the custom themes.

<Canvas>
    <Story
        name="default"
        args={{
            id: 'default-theme',
        }}
        component={ChartWithAxisGrid}
        decorators={[DivDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="custom"
        args={{
            id: 'custom-theme',
            theme: customTheme,
        }}
        component={ChartWithAxisGrid}
        decorators={[DivDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

When two charts appear on the same page, as above, a theme for one chart may affect/override the appearance of another chart.
(This happens because the `<style>` tag in HTML documents specify global settings.)
To avoid such cross-talk, set a unique identifier for each chart via the prop `id`.

<Source
    language="javascript"
    code={`
<Chart {...props} theme={customThemeA} id="chart-A">
  ...
</Chart>
<Chart {...props} theme={customThemeB} id="chart-B">
  ...
</Chart>`}
/>
