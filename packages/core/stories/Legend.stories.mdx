import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { Legend, Rectangle } from '../src'
import { ChartForLegendDecorator } from './decorators'

# Legend

<Meta title="Core/Components/Legend" />
export const Template = args => <Legend {...args} />

`Legend` draws a standard legend on a chart.

<ArgsTable of={Legend} />

## Position, size, and anchor

The location of the legend is controlled by props `position`, `size`, and `anchor`.

Prop `position` determines a coordinate in the current view. Prop `size` sets the width and height of the legend container. Prop `anchor` determines which point along the legend boundary makes contact with the specified position.

In the examples below, the gray area is the current view, and the blue rectangle indicates the legend.

<Canvas>
    <Story
        name="right, anchored middle-left"
        args={{
            position: [240, 70],
            size: [60, 80],
            units: 'absolute',
            anchor: [0, 0.5],
            children: <Rectangle x={0} y={0} width={60} height={80} style={{ fill: '#aabbee' }} />,
        }}
        component={Legend}
        decorators={[ChartForLegendDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="bottom-right, anchored bottom-left"
        args={{
            position: [240, 140],
            size: [60, 80],
            units: 'absolute',
            anchor: [0, 1],
            children: <Rectangle x={0} y={0} width={60} height={80} style={{ fill: '#aabbee' }} />,
        }}
        component={Legend}
        decorators={[ChartForLegendDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="bottom-right, anchored bottom-right"
        args={{
            position: [240, 140],
            size: [60, 80],
            units: 'absolute',
            anchor: [1, 1],
            children: <Rectangle x={0} y={0} width={60} height={80} style={{ fill: '#aabbee' }} />,
        }}
        component={Legend}
        decorators={[ChartForLegendDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="bottom, anchored top"
        args={{
            position: [120, 140],
            size: [140, 60],
            units: 'absolute',
            anchor: [0.5, 0],
            children: <Rectangle x={0} y={0} width={140} height={60} style={{ fill: '#aabbee' }} />,
        }}
        component={Legend}
        decorators={[ChartForLegendDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Padding

A prop `padding` introduces space between the legend's bounding container (determined by `position`, `size`, and `anchor`) and the legend content.

<Canvas>
    <Story
        name="right, with padding"
        args={{
            position: [240, 70],
            size: [60, 80],
            units: 'absolute',
            anchor: [0, 0.5],
            padding: [0, 12, 0, 12],
            children: <Rectangle x={0} y={0} width={60} height={80} style={{ fill: '#aabbee' }} />,
        }}
        component={Legend}
        decorators={[ChartForLegendDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Note that adding padding can have a very similar effect to adjusting the position and size. This is just a convenience prop that makes the API consistent with other container-based components.

## Content

When `Legend` is used without any child elements, it automatically creates a title and entries for relevant colors and labels. This functionality is dependent on the dataset associated with the view. This functionality is demonstrated in the `@chask/band` and `@chask/xy` packages.

Alternatively, the legend content can be constructed manually using `LegendTitle` and `LegendItem` components.
