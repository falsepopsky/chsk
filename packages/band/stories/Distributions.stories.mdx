import { ArgsTable, Canvas, Meta, Source, Story } from '@storybook/addon-docs'
import { Distribution, Distributions, BarAndWhisker, BoxAndWhiskers, LineAndWhiskers } from '../src'
import {
    ChartDistributionDecorator,
    ChartHorizontalDistributionDecorator,
    onDistributionsClick,
} from './decorators'

# Distributions

<Meta title="Addons/Band/Distributions" />
export const Template = args => <Distributions {...args} />

`Distributions` summarizes distributions of numeric values.

`Distributions` is intended to be used within a `Distribution` view. Note that while the `Distributions` component is the one that draws boxes and whiskers, much of the chart layout is determined by the parent view `Distribution`.

<ArgsTable of={Distributions} />

## Component

Prop `component` specifies how distributions are portrayed graphically on the chart.
By default, `Distributions` uses a `BoxAndWhiskers` component.

<Canvas>
    <Story
        name="boxes, vertical"
        args={{
            middleStyle: { strokeWidth: 2, stroke: '#222222' },
            component: BoxAndWhiskers,
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="boxes, horizontal"
        args={{
            middleStyle: { strokeWidth: 2, stroke: '#222222' },
            component: BoxAndWhiskers,
        }}
        component={Distributions}
        decorators={[ChartHorizontalDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Alternative components are `BarAndWhisker` and `LineAndWhiskers`.

<Canvas>
    <Story
        name="bars, vertical"
        args={{
            boxStyle: { strokeWidth: 1 },
            whiskerStyle: { strokeWidth: 1 },
            component: BarAndWhisker,
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="bars, horizontal"
        args={{
            boxStyle: { strokeWidth: 1 },
            whiskerStyle: { strokeWidth: 1 },
            component: BarAndWhisker,
        }}
        component={Distributions}
        decorators={[ChartHorizontalDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="lines, vertical"
        args={{
            middleStyle: { strokeWidth: 3 },
            whiskerStyle: { strokeWidth: 1 },
            component: LineAndWhiskers,
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="lines, horizontal"
        args={{
            middleStyle: { strokeWidth: 3 },
            whiskerStyle: { strokeWidth: 1 },
            component: LineAndWhiskers,
        }}
        component={Distributions}
        decorators={[ChartHorizontalDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Note that `BoxAndWhiskers` always uses non-parametric summary statistics (quantiles).
In contrast, `BarAndWhisker` and `LineAndWhiskers` use parametric summary statistics (mean and standard deviation).

Prop `component` also accepts custom implementations of the `BoxAndWhiskersProps` interface.

## Data subsets

By default, `Distributions` draws the entire dataset. To draw subsets, use props `ids` and `keys`.

<Canvas>
    <Story
        name="selected ids"
        args={{
            ids: ['alpha'],
            middleStyle: { strokeWidth: 3, stroke: '#444444' },
            whiskerStyle: { strokeWidth: 2 },
            boxStyle: { strokeWidth: 0.5, stroke: '#444444' },
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="selected keys"
        args={{
            keys: ['x'],
            middleStyle: { strokeWidth: 3, stroke: '#444444' },
            whiskerStyle: { strokeWidth: 2 },
            boxStyle: { strokeWidth: 0.5, stroke: '#444444' },
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Whisker cap width

The size of the whisker 'cap' can be adjusted with prop `whiskerCapWidth`.

<Canvas>
    <Story
        name="whisker cap"
        args={{
            middleStyle: { strokeWidth: 3, stroke: '#444444' },
            whiskerStyle: { strokeWidth: 2 },
            boxStyle: { strokeWidth: 0.5, stroke: '#444444' },
            whiskerCapWidth: 0.5,
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Mouse events

To make the box and whiskers respond to mouse events, set prop `handlers`.

<Canvas>
    <Story
        name="mouse click"
        args={{
            middleStyle: { strokeWidth: 3, stroke: '#222222' },
            whiskerStyle: { strokeWidth: 2 },
            handlers: { onClick: onDistributionsClick },
        }}
        component={Distributions}
        decorators={[ChartDistributionDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

(Click on the boxes, then check the browser console with `Ctrl Shift J` for output.)
