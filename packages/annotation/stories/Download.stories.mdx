import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { Chart, Typography } from '@chsk/core'
import { Bar, Bars } from '@chsk/band'
import { Download } from '../src'
import { barProps } from './decorators'

<Meta title="Addons/Annotation/Download" />

# Download

export const Template = args => <Download {...args} />

`Download` provides a click-able object that triggers a download of chart content into a file.

<ArgsTable of={Download} />

## Data download

Set prop `variant` to `'data'` to fetch the raw data associated with a view (in `json` format).

The example below uses a simple `Bar` view; click the text above the bars to download the raw data for the bars.

<Canvas>
    <Story name="data download">
        <Chart size={[400, 300]} padding={[40, 40, 40, 40]} style={{ display: 'inline-block' }}>
            <Bar {...barProps}>
                <Bars />
                <Download variant={'data'} filename={'example.json'}>
                    <Typography position={[0, -10]}>click to download data</Typography>
                </Download>
            </Bar>
        </Chart>
    </Story>
</Canvas>

## Image download

Set prop `variant` to `'image'` to fetch an image of the entire chart (in `svg` format).

<Canvas>
    <Story name="image download">
        <Chart size={[400, 300]} padding={[40, 40, 40, 40]} style={{ display: 'inline-block' }}>
            <Bar {...barProps}>
                <Bars />
                <Download variant={'image'} filename={'example.svg'}>
                    <Typography position={[0, -10]}>click to download image</Typography>
                </Download>
            </Bar>
        </Chart>
    </Story>
</Canvas>
